{% extends "base.html" %}

{% block title %}Маршрутизация - Allow{% endblock %}

{% block content %}
<div class="settings-page">
    <header class="settings-page-header" role="banner">
        <h1>Маршрутизация</h1>
        <div class="settings-save-bar" id="routing-save-bar" aria-live="polite">
            <span class="settings-unsaved-hint" id="routing-unsaved-hint"></span>
            <button type="button" class="btn btn-primary" id="save-routing-changes-btn" onclick="saveAllRoutingChanges()" disabled>Сохранить</button>
        </div>
    </header>

    <div class="routing-columns">
        <!-- Колонка 1: Напрямую -->
        <div class="routing-column" id="direct-column">
            <div class="column-header">
                <h2>Напрямую</h2>
                <button class="btn btn-primary btn-sm" onclick="addBlock('direct')">+ Добавить блок</button>
            </div>
            <div class="blocks-container" id="direct-blocks">
                <!-- Блоки будут загружены через JS -->
            </div>
        </div>

        <!-- Колонка 2: Встроенные инструменты обхода -->
        <div class="routing-column" id="bypass-column">
            <div class="column-header">
                <h2>Встроенные инструменты обхода</h2>
                <button class="btn btn-primary btn-sm" onclick="addBlock('bypass')">+ Добавить блок</button>
            </div>
            <div class="blocks-container" id="bypass-blocks">
                <!-- Блоки будут загружены через JS -->
            </div>
        </div>

        <!-- Колонка 3: VPN -->
        <div class="routing-column" id="vpn-column">
            <div class="column-header">
                <h2>VPN</h2>
                <button class="btn btn-primary btn-sm" onclick="addBlock('vpn')">+ Добавить блок</button>
            </div>
            <div class="blocks-container" id="vpn-blocks">
                <!-- Блоки будут загружены через JS -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block modals %}
    {% include 'partials/modal-config-editor.html' %}
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='routing.js') }}"></script>
{% endblock %}

